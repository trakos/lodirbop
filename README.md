# Infinite Baskets Universe #

* Website: http://ibu.trakos.pl:10380
* Source code: http://ibu.trakos.pl:10380/reports/code.zip

## Short description ##

The main logic is in php, and frontend in angularjs only helps user to fill his basket and show match results generated by php.
Data exchange between php and javascript is done by small REST-like api: http://ibu.trakos.pl:10380/apidoc/ (click on one of the 3 methods to show it's description).

Most important logic is in class 
```
\Trakos\AppBundle\Service\Factory\MagicResultsFactory (defined in src/AppBundle/Service/Factory/MagicResultsFactory.php )
```
and tested mostly in 
```
\Trakos\AppBundle\Tests\Unit\Service\Factory\MagicResultsFactoryTest (defined in tests/php/AppBundle/Unit/Service/Factory/MagicResultsFactoryTest.php )
```
Everything angularjs related is in directory:
```
src/AppBundle/Resources/javascripts/angular-app
```
## Test coverage ##

* http://ibu.trakos.pl:10380/reports/js_coverage/
* http://ibu.trakos.pl:10380/reports/php_coverage/
* http://ibu.trakos.pl:10380/reports/angularjs_tests.html

## Dependencies ##

### composer ###

* symfony - main framework
* symfony bundles
    * sensio/framework-extra-bundle (route annotations)
    * willdurand/js-translation-bundle (allows javascript to use translations from symfony)
    * symfony/assetic-bundle (assets management and automatic scss compilation for dev)
    * friendsofsymfony/rest-bundle (helps with REST views, displaying errors as jsons)
    * nelmio/api-doc-bundle (api doc generator from annotations)
    * jms/serializer-bundle (helps with serializing objects by annotations and used by api-doc-bundle)
* dev: phpunit

### node ###
* only dev tools: karma, jasmine, bower

### bower ###

* bootstrap-sass - scss source
* jquery - required by some componenets of bootstrap
* angularjs (and some angular modules)
* uri.js (for easier testing)
* remarkable-bootstrap-notify for error notifications
* angular-bootstrap-show-errors which adds show-errors directive that adds bootstrap validation classes on angular validation
* dev: some helpers for jasmine

### gem ###
* sass
* compass (0.12.7, assetic doesn't work with newer versions)

## Installation ##

```
composer install
# should be automatically called afterwards:
npm install
bower install
# assetic also requires compass and sass, they can be installed from gemfile:
bundle install
```

Generating assets:
```
php app/console bazinga:js-translation:dump app/cache/js-translation
php app/console assetic:dump # can be omitted on dev
```

## Testing ##
```
composer test # php
npm test      # javascript
```